# A2L Editor Tauri ç‰ˆæœ¬ - é¡¹ç›®è®¾è®¡æ–‡æ¡£

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 èƒŒæ™¯
A2L Editor æ˜¯ä¸€ä¸ªä» ELF/DWARF è°ƒè¯•ä¿¡æ¯ç”Ÿæˆ A2L æ–‡ä»¶çš„æ¡Œé¢å·¥å…·ã€‚ä½¿ç”¨ Rust + Tauri 2 + Svelte 5 æŠ€æœ¯æ ˆã€‚

### 1.2 ç›®æ ‡
- ç°ä»£åŒ– UI è®¾è®¡ï¼Œç®€æ´ç¾è§‚
- æµç•…çš„äº¤äº’ä½“éªŒï¼ˆå³é”®èœå•ã€ä¸»é¢˜åˆ‡æ¢ï¼‰
- æ”¯æŒå¤§è§„æ¨¡æ•°æ®ï¼ˆ10ä¸‡+å˜é‡ï¼‰

### 1.3 èŒƒå›´
| é¡¹ç›® | èŒƒå›´ |
|------|------|
| æ ¸å¿ƒåº“ (src/lib/) | æ ¸å¿ƒåŠŸèƒ½ï¼Œç¨³å®š |
| CLI (src/bin/a2l_cli.rs) | å‘½ä»¤è¡Œå·¥å…· |
| å‰ç«¯ (src-ui/) | Svelte + TailwindCSS |
| åç«¯ (src-tauri/) | Tauri 2 Commands |

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç•Œé¢å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Svelte + TailwindCSS                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ Header  â”‚ â”‚ A2lPanelâ”‚ â”‚VarList  â”‚ â”‚ Dialogs  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Tauri IPC (invoke)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Tauri åç«¯å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              commands.rs (Tauri Commands)            â”‚   â”‚
â”‚  â”‚  load_elf â”‚ load_package â”‚ search_entries â”‚ export  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ å‡½æ•°è°ƒç”¨
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ ¸å¿ƒåº“å±‚ (lib/)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ elf.rs  â”‚ â”‚dwarf.rs â”‚ â”‚ a2l.rs  â”‚ â”‚data_pkg â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬ | åŸå›  |
|------|------|------|------|
| å‰ç«¯æ¡†æ¶ | Svelte | 5.x | ç®€æ´ã€é«˜æ€§èƒ½ã€å­¦ä¹ æˆæœ¬ä½ |
| UI ç»„ä»¶ | shadcn-svelte | latest | æ— æ ·å¼ç»„ä»¶ï¼Œé«˜åº¦å¯å®šåˆ¶ |
| æ ·å¼æ–¹æ¡ˆ | TailwindCSS | 3.x | åŸå­åŒ– CSSï¼Œå¿«é€Ÿå¼€å‘ |
| æ¡Œé¢æ¡†æ¶ | Tauri | 2.x | åŒ…ä½“å°ã€æ€§èƒ½å¥½ã€Rust åŸç”Ÿ |
| çŠ¶æ€ç®¡ç† | Svelte Stores | å†…ç½® | ç®€å•é«˜æ•ˆ |
| ç±»å‹ç³»ç»Ÿ | TypeScript | 5.x | ç±»å‹å®‰å…¨ |

### 2.3 ç›®å½•ç»“æ„

```
a2l-editor/
â”œâ”€â”€ Cargo.toml                    # workspace é…ç½®
â”œâ”€â”€ package.json                  # npm workspace
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ DESIGN.md                 # é¡¹ç›®è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ PLAN.md                   # é¡¹ç›®è®¡åˆ’æ–‡æ¡£
â”‚   â”œâ”€â”€ TASKS.md                  # ä»»åŠ¡æ¸…å•
â”‚   â””â”€â”€ HANDOVER_TAURI.md         # Tauri ç‰ˆæœ¬äº¤æ¥æ–‡æ¡£
â”‚
â”œâ”€â”€ src/                          # Rust æºç  (å…±ç”¨)
â”‚   â”œâ”€â”€ main.rs                   # egui å…¥å£ (ä¿ç•™)
â”‚   â”œâ”€â”€ main_tauri.rs             # Tauri å…¥å£ (æ–°å¢)
â”‚   â”œâ”€â”€ commands.rs               # Tauri Commands (æ–°å¢)
â”‚   â”œâ”€â”€ lib/                      # æ ¸å¿ƒåº“ (ä¸ä¿®æ”¹)
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ a2l.rs
â”‚   â”‚   â”œâ”€â”€ cache.rs
â”‚   â”‚   â”œâ”€â”€ data_package.rs
â”‚   â”‚   â”œâ”€â”€ dwarf.rs
â”‚   â”‚   â”œâ”€â”€ elf.rs
â”‚   â”‚   â”œâ”€â”€ hash.rs
â”‚   â”‚   â””â”€â”€ types.rs
â”‚   â””â”€â”€ app/                      # egui UI (ä¿ç•™)
â”‚       â”œâ”€â”€ mod.rs
â”‚       â””â”€â”€ ui/
â”‚
â”œâ”€â”€ src-tauri/                    # Tauri é…ç½® (æ–°å¢)
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ tauri.conf.json
â”‚   â”œâ”€â”€ capabilities/
â”‚   â””â”€â”€ icons/
â”‚
â””â”€â”€ src-ui/                       # Svelte å‰ç«¯ (æ–°å¢)
    â”œâ”€â”€ package.json
    â”œâ”€â”€ svelte.config.js
    â”œâ”€â”€ tailwind.config.js
    â”œâ”€â”€ vite.config.ts
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ static/
    â”‚   â””â”€â”€ fonts/
    â”‚       â””â”€â”€ NotoSansSC-Regular.otf
    â””â”€â”€ src/
        â”œâ”€â”€ app.html
        â”œâ”€â”€ app.css
        â”œâ”€â”€ app.d.ts
        â”œâ”€â”€ lib/
        â”‚   â”œâ”€â”€ commands.ts       # Tauri API å°è£…
        â”‚   â”œâ”€â”€ stores.ts         # Svelte stores
        â”‚   â”œâ”€â”€ themes.ts         # ä¸»é¢˜é…ç½®
        â”‚   â”œâ”€â”€ types.ts          # TypeScript ç±»å‹
        â”‚   â””â”€â”€ components/
        â”‚       â”œâ”€â”€ ui/           # shadcn-svelte ç»„ä»¶
        â”‚       â”‚   â”œâ”€â”€ button/
        â”‚       â”‚   â”œâ”€â”€ dialog/
        â”‚       â”‚   â”œâ”€â”€ input/
        â”‚       â”‚   â””â”€â”€ scroll-area/
        â”‚       â”œâ”€â”€ Header.svelte
        â”‚       â”œâ”€â”€ FileInfo.svelte
        â”‚       â”œâ”€â”€ VariableList.svelte
        â”‚       â”œâ”€â”€ A2lPanel.svelte
        â”‚       â”œâ”€â”€ ContextMenuElf.svelte
        â”‚       â”œâ”€â”€ ContextMenuA2l.svelte
        â”‚       â”œâ”€â”€ StatusBar.svelte
        â”‚       â”œâ”€â”€ ExportDialog.svelte
        â”‚       â”œâ”€â”€ GenerateDialog.svelte
        â”‚       â”œâ”€â”€ AboutDialog.svelte
        â”‚       â””â”€â”€ ThemeSwitch.svelte
        â””â”€â”€ routes/
            â”œâ”€â”€ +layout.svelte
            â””â”€â”€ +page.svelte
```

---

## 3. UI è®¾è®¡

### 3.1 æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       ğŸ¨  v0.1.0      â”‚
â”‚  â”‚ ğŸ“ æ–‡ä»¶         â–¼   â”‚  â”‚ â“ æ‰‹å†Œ â”‚  â”‚ â„¹ï¸ å…³äº â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‚ ELF: /path/to/firmware.elf (437 MB, 133,646 æ¡ç›®)       [å¯¼å…¥]      â”‚
â”‚  ğŸ“¦ æ•°æ®åŒ…: /path/to/firmware.elf.a2ldata                   [å¯¼å…¥]      â”‚
â”‚  ğŸ“„ A2L: /path/to/output.a2l (1,234 ä¸ªå˜é‡)                 [å¯¼å…¥]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ A2L å˜é‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€ ELF å˜é‡ â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ” [æœç´¢ A2L å˜é‡...              ] [âœ–] â”‚ â”‚ ğŸ” [æœç´¢ ELF å˜é‡...] â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ å˜é‡å            ç±»å‹      åœ°å€        â”‚ â”‚ å˜é‡å    ç±»å‹   åœ°å€  â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  â”‚ var1              ULONG    0x70000000   â”‚ â”‚ var_name  ULONG  0x.. â”‚â”‚
â”‚  â”‚ var2              FLOAT    0x70000004   â”‚ â”‚ another   SWORD  0x.. â”‚â”‚  â† é€‰ä¸­é«˜äº®
â”‚  â”‚ var3              UWORD    0x70000008   â”‚ â”‚ existing  FLOAT  0x.. â”‚â”‚  â† å·²å­˜åœ¨å˜æ·¡
â”‚  â”‚ ...                                     â”‚ â”‚ ...                   â”‚â”‚
â”‚  â”‚                                         â”‚ â”‚                       â”‚â”‚
â”‚  â”‚ æ˜¾ç¤º: 1,234                             â”‚ â”‚ æ˜¾ç¤º: 1,234 / 133,646 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ å•å‡»é€‰æ‹©å˜é‡ï¼Œå³é”®æ‰“å¼€èœå•                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é¡¶éƒ¨èœå•æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       ğŸ¨  v0.1.0      â”‚
â”‚  â”‚ ğŸ“ æ–‡ä»¶         â–¼   â”‚  â”‚ â“ æ‰‹å†Œ â”‚  â”‚ â„¹ï¸ å…³äº â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–‡ä»¶ä¸‹æ‹‰èœå•ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‚ æ‰“å¼€ ELF...      â”‚
â”‚ ğŸ“¦ æ‰“å¼€æ•°æ®åŒ…...    â”‚
â”‚ ğŸ“„ é€‰æ‹©ç›®æ ‡ A2L...  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸ”„ é‡æ–°ç”Ÿæˆç¼“å­˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰‹å†ŒæŒ‰é’®ï¼š
- æ‰“å¼€ README.md æˆ–åœ¨çº¿æ–‡æ¡£

å…³äºå¯¹è¯æ¡†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…³äº A2L Editor                 [âœ–]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚           A2L Editor                   â”‚
â”‚           ç‰ˆæœ¬ 0.1.0                   â”‚
â”‚                                        â”‚
â”‚  ä» ELF/DWARF ç”Ÿæˆ A2L æ–‡ä»¶çš„æ¡Œé¢å·¥å…·  â”‚
â”‚                                        â”‚
â”‚  æŠ€æœ¯æ ˆ: Rust + Tauri + Svelte         â”‚
â”‚                                        â”‚
â”‚  ä»“åº“: github.com/horinen/a2l-editor   â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [ç¡®å®š]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 æ–‡ä»¶ä¿¡æ¯è¡Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‚ ELF: /path/to/firmware.elf (437 MB, 133,646 æ¡ç›®)       [å¯¼å…¥]      â”‚
â”‚  ğŸ“¦ æ•°æ®åŒ…: /path/to/firmware.elf.a2ldata                   [å¯¼å…¥]      â”‚
â”‚  ğŸ“„ A2L: /path/to/output.a2l (1,234 ä¸ªå˜é‡)                 [å¯¼å…¥]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€æ˜¾ç¤º**ï¼š

| æ–‡ä»¶ | æœªåŠ è½½ | å·²åŠ è½½ |
|------|--------|--------|
| ELF | `ğŸ“‚ ELF: æœªé€‰æ‹© [å¯¼å…¥]` | `ğŸ“‚ ELF: firmware.elf (437 MB, 133,646 æ¡ç›®) [å¯¼å…¥]` |
| æ•°æ®åŒ… | `ğŸ“¦ æ•°æ®åŒ…: æœªé€‰æ‹© [å¯¼å…¥]` | `ğŸ“¦ æ•°æ®åŒ…: firmware.a2ldata [å¯¼å…¥]` |
| A2L | `ğŸ“„ A2L: æœªé€‰æ‹© [å¯¼å…¥]` | `ğŸ“„ A2L: output.a2l (1,234 ä¸ªå˜é‡) [å¯¼å…¥]` |

### 3.4 åŒé¢æ¿å¸ƒå±€

**å·¦ä¾§ A2L å˜é‡é¢æ¿** (ç›®æ ‡æ–‡ä»¶ä¸­çš„å˜é‡)ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ A2L å˜é‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” [________________________] [âœ–]       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚    â”‚ å˜é‡å Â¹â–²    ç±»å‹    â”‚ åœ°å€ Â²â–¼    â”‚  â† å¯æ’åºçš„è¡¨å¤´
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸ“Š â”‚ calib_value  UBYTE   â”‚ 0x70000010 â”‚
â”‚ ğŸ“Š â”‚ sensor_temp SWORD   â”‚ 0x70000014 â”‚  â† é€‰ä¸­é«˜äº®
â”‚ ğŸ“ˆ â”‚ output_val  FLOAT   â”‚ 0x70000018 â”‚  â† ğŸ“ˆ=æ ‡å®š, ğŸ“Š=è§‚æµ‹
â”‚ ...                                     â”‚
â”‚                                         â”‚
â”‚ æ˜¾ç¤º: 1,234                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å³ä¾§ ELF å˜é‡é¢æ¿** (å¯æ·»åŠ çš„å˜é‡)ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ELF å˜é‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” [________________________] [âœ–]       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ å˜é‡å Â¹â–²      ç±»å‹      â”‚ åœ°å€ Â²â–¼     â”‚  â† å¯æ’åºçš„è¡¨å¤´
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ var_name      ULONG     â”‚ 0x70000000   â”‚
â”‚ another_var   SWORD     â”‚ 0x70000004   â”‚  â† é€‰ä¸­é«˜äº®
â”‚ existing_var  FLOAT     â”‚ 0x70000008   â”‚  â† å·²å­˜åœ¨å˜æ·¡
â”‚ ...                                     â”‚
â”‚                                         â”‚
â”‚ æ˜¾ç¤º: 1,234 / 133,646                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4.1 æ’åºåŠŸèƒ½

**è¡¨å¤´æ’åºäº¤äº’**ï¼š
```
ç‚¹å‡»åˆ—æ ‡é¢˜è¡Œä¸ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœªæ’åº â†’ å‡åº (â–²) â†’ é™åº (â–¼) â†’ æœªæ’åº â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¤šåˆ—æ’åºç¤ºä¾‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    â”‚ å˜é‡å Â¹â–² â”‚ ç±»å‹ Â²â–² â”‚ åœ°å€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†‘ Â¹ è¡¨ç¤ºç¬¬ä¸€æ’åºä¼˜å…ˆçº§
â†‘ Â² è¡¨ç¤ºç¬¬äºŒæ’åºä¼˜å…ˆçº§
```

**æ’åºè§„åˆ™**ï¼š
- é»˜è®¤æŒ‰å˜é‡åå‡åºæ’åº
- ç‚¹å‡»åˆ—æ ‡é¢˜æ·»åŠ /åˆ‡æ¢/ç§»é™¤æ’åº
- æ”¯æŒ Shift+ç‚¹å‡»æ·»åŠ ç¬¬äºŒæ’åºæ¡ä»¶
- æ•°å­—ä¸Šæ ‡æ˜¾ç¤ºæ’åºä¼˜å…ˆçº§ï¼ˆÂ¹Â²Â³ï¼‰
- åœ°å€æŒ‰åå…­è¿›åˆ¶æ•°å€¼æ’åº

### 3.4.2 æ·»åŠ å˜é‡åè‡ªåŠ¨å®šä½

**æµç¨‹**ï¼š
```
1. ç”¨æˆ·åœ¨ ELF é¢æ¿é€‰æ‹©å˜é‡
2. å³é”® â†’ æ·»åŠ ä¸ºè§‚æµ‹/æ ‡å®šå˜é‡
3. å¯¼å‡ºæˆåŠŸåï¼š
   a. é‡æ–°åŠ è½½ A2L å˜é‡åˆ—è¡¨
   b. æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªæ–°æ·»åŠ çš„å˜é‡
   c. é«˜äº®æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰
```

### 3.4.3 å·²è§£å†³é—®é¢˜

**é—®é¢˜ #6: Shift å¤šé€‰é€‰ä¸­çš„å˜é‡ä¸å¯¹** âœ… å·²ä¿®å¤

| é¡¹ç›® | æè¿° |
|------|------|
| é—®é¢˜ | Shift å¤šé€‰æ—¶é€‰ä¸­çš„å˜é‡èŒƒå›´ä¸ç‚¹å‡»çš„å˜é‡ä¸ä¸€è‡´ |
| åŸå›  | æ’åºåï¼Œ`displayEntries` çš„ç´¢å¼•ä¸ `elfSelectedIndices` å­˜å‚¨çš„åŸå§‹ç´¢å¼•ä¸ä¸€è‡´ |
| è§£å†³æ–¹æ¡ˆ | ä½¿ç”¨æ˜¾ç¤ºä½ç½®ç´¢å¼• (`displayIndex`) æ›¿ä»£åŸå§‹ç´¢å¼•ï¼Œå­˜å‚¨åœ¨ `lastElfSelectedDisplayPos` ä¸­ |

**é—®é¢˜ #7: ELF æ’åºåªå¯¹å·²åŠ è½½çš„10000ä¸ªå˜é‡ç”Ÿæ•ˆ** âœ… å·²ä¿®å¤

| é¡¹ç›® | æè¿° |
|------|------|
| é—®é¢˜ | æ›´æ”¹æ’åºåï¼Œåªæœ‰å½“å‰å·²åŠ è½½çš„10000ä¸ªå˜é‡è¢«æ’åº |
| åŸå›  | å‰ç«¯åªåŠ è½½äº†10000ä¸ªå˜é‡ï¼Œæ’åºä»…åœ¨è¿™10000ä¸ªä¸­è¿›è¡Œ |
| è§£å†³æ–¹æ¡ˆ | åç«¯ `search_elf_entries` æ”¯æŒæ’åºå‚æ•°ï¼ˆ`sort_field`, `sort_order`ï¼‰ï¼Œåœ¨æ•°æ®åº“å±‚é¢æ’åºåè¿”å› |

### 3.5 å³é”®èœå•

**å·¦ä¾§ A2L å˜é‡èœå•**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—‘ åˆ é™¤å˜é‡          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ğŸ“‹ å¤åˆ¶åç§°          â”‚
â”‚ ğŸ“‹ å¤åˆ¶åœ°å€          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ âœ– å–æ¶ˆé€‰æ‹©          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å³ä¾§ ELF å˜é‡èœå•**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æ·»åŠ ä¸ºè§‚æµ‹å˜é‡    â”‚  â† A2L æœªé€‰æ‹©æ—¶ç½®ç°
â”‚ ğŸ“ˆ æ·»åŠ ä¸ºæ ‡å®šå˜é‡    â”‚  â† A2L æœªé€‰æ‹©æ—¶ç½®ç°
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ğŸ“‹ å¤åˆ¶åç§°          â”‚
â”‚ ğŸ“‹ å¤åˆ¶åœ°å€          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ âœ– å–æ¶ˆé€‰æ‹©          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 åº•éƒ¨çŠ¶æ€æ  (åŠ¨æ€æç¤ºå¼)

| å½“å‰çŠ¶æ€ | æ˜¾ç¤ºå†…å®¹ |
|----------|----------|
| åˆšå¯åŠ¨ï¼Œæ— æ–‡ä»¶ | `ğŸ’¡ æ–‡ä»¶ â†’ æ‰“å¼€ ELF å¼€å§‹ä½¿ç”¨` |
| ELF å·²åŠ è½½ï¼Œæ— é€‰ä¸­ | `ğŸ’¡ å•å‡»é€‰æ‹©å˜é‡ï¼Œå³é”®æ‰“å¼€èœå•` |
| ELF å·²é€‰ä¸­ï¼ŒA2L æœªé€‰æ‹© | `âš ï¸ è¯·å…ˆé€‰æ‹©ç›®æ ‡ A2L æ–‡ä»¶` |
| ELF å·²é€‰ä¸­ï¼ŒA2L å·²é€‰æ‹© | `ğŸ’¡ å³é”® â†’ æ·»åŠ ä¸ºè§‚æµ‹/æ ‡å®šå˜é‡` |
| A2L å·²é€‰ä¸­ | `ğŸ’¡ å³é”® â†’ åˆ é™¤æ‰€é€‰å˜é‡` |
| åŠ è½½ä¸­ | `â³ æ­£åœ¨åŠ è½½ firmware.elf...` |
| æ·»åŠ æˆåŠŸ | `âœ… å·²æ·»åŠ  3 ä¸ªå˜é‡åˆ° output.a2l` |
| åˆ é™¤æˆåŠŸ | `âœ… å·²ä» output.a2l åˆ é™¤ 2 ä¸ªå˜é‡` |
| æ“ä½œå¤±è´¥ | `âŒ å¯¼å‡ºå¤±è´¥: æ–‡ä»¶è¢«å ç”¨` |

### 3.7 äº¤äº’è®¾è®¡

| äº¤äº’ | è¡Œä¸º |
|------|------|
| å•å‡»è¡Œ | å•é€‰ï¼ˆæ¸…é™¤å…¶ä»–é€‰ä¸­ï¼‰ |
| Ctrl + å•å‡» | å¤šé€‰/å–æ¶ˆé€‰ä¸­ |
| Shift + å•å‡» | èŒƒå›´é€‰æ‹© |
| å³é”®è¡Œ | æ‰“å¼€ä¸Šä¸‹æ–‡èœå• |
| Ctrl + A | å…¨é€‰å½“å‰ç­›é€‰ç»“æœ |
| â†‘ / â†“ é”® | é”®ç›˜å¯¼èˆª |
| æœç´¢æ¡† | å®æ—¶æœç´¢ + é˜²æŠ– (300ms) |
| ç‚¹å‡»è¡¨å¤´ | åˆ‡æ¢æ’åºï¼ˆæœªæ’åºâ†’å‡åºâ†’é™åºâ†’æœªæ’åºï¼‰ |
| Shift + ç‚¹å‡»è¡¨å¤´ | æ·»åŠ ç¬¬äºŒæ’åºæ¡ä»¶ |

### 3.8 æ’åºäº¤äº’è¯¦æƒ…

**å•åˆ—æ’åº**ï¼š
1. ç‚¹å‡»åˆ—æ ‡é¢˜ â†’ æŒ‰è¯¥åˆ—å‡åºæ’åº
2. å†æ¬¡ç‚¹å‡» â†’ å˜ä¸ºé™åº
3. å†æ¬¡ç‚¹å‡» â†’ å–æ¶ˆæ’åºï¼ˆæ¢å¤é»˜è®¤é¡ºåºï¼‰

**å¤šåˆ—æ’åº**ï¼š
1. ç‚¹å‡»åˆ— A â†’ æŒ‰åˆ— A æ’åº
2. Shift + ç‚¹å‡»åˆ— B â†’ å…ˆæŒ‰åˆ— Aï¼Œå†æŒ‰åˆ— B æ’åº
3. æ•°å­—ä¸Šæ ‡æ˜¾ç¤ºä¼˜å…ˆçº§ï¼ˆÂ¹Â²Â³ï¼‰

**é»˜è®¤è¡Œä¸º**ï¼š
- A2L å’Œ ELF é¢æ¿é»˜è®¤éƒ½æŒ‰å˜é‡åå‡åºæ’åº
- æ’åºçŠ¶æ€ä¸æŒä¹…åŒ–ï¼ˆåˆ·æ–°åæ¢å¤é»˜è®¤ï¼‰

### 3.8 è§†è§‰åé¦ˆ

| çŠ¶æ€ | æ ·å¼ |
|------|------|
| æœªé€‰ä¸­ | é€æ˜èƒŒæ™¯ |
| æ‚¬åœ | `bg-hover` èƒŒæ™¯è‰² |
| é€‰ä¸­ | `bg-selected` èƒŒæ™¯è‰² + å·¦ä¾§è“è‰²è¾¹æ¡† |
| å·²å­˜åœ¨äº A2L | æ–‡å­—é¢œè‰²å˜æ·¡ (`text-muted`) |

### 3.9 ä¸»é¢˜ç³»ç»Ÿ

| ä¸»é¢˜ | èƒŒæ™¯è‰² | æ–‡å­—è‰² | å¼ºè°ƒè‰² |
|------|--------|--------|--------|
| Dark (é»˜è®¤) | `#0f0f12` | `#e4e4e7` | `#3b82f6` |
| Light | `#ffffff` | `#18181b` | `#3b82f6` |
| Midnight | `#000000` | `#fafafa` | `#3b82f6` |
| Ocean | `#0c1222` | `#e0f2fe` | `#06b6d4` |

---

## 4. æ•°æ®æµè®¾è®¡

### 4.1 çŠ¶æ€ç®¡ç†

```typescript
// stores.ts

// ELF å˜é‡
export const elfEntries = writable<A2lEntry[]>([]);
export const elfFilteredCount = writable<number>(0);
export const elfTotalCount = writable<number>(0);
export const elfSearchQuery = writable<string>('');
export const elfSelectedIndices = writable<Set<number>>(new Set());

// A2L å˜é‡
export const a2lVariables = writable<A2lVariable[]>([]);
export const a2lSearchQuery = writable<string>('');
export const a2lSelectedIndices = writable<Set<number>>(new Set());

// æ–‡ä»¶çŠ¶æ€
export const elfPath = writable<string | null>(null);
export const packagePath = writable<string | null>(null);
export const a2lPath = writable<string | null>(null);
export const a2lNames = writable<Set<string>>(new Set());

// åº”ç”¨çŠ¶æ€
export const statusMessage = writable<string>('ğŸ’¡ æ–‡ä»¶ â†’ æ‰“å¼€ ELF å¼€å§‹ä½¿ç”¨');
export const isLoading = writable<boolean>(false);

// ä¸»é¢˜
export const currentTheme = writable<string>('dark');

// æ´¾ç”ŸçŠ¶æ€
export const elfSelectedCount = derived(elfSelectedIndices, $set => $set.size);
export const a2lSelectedCount = derived(a2lSelectedIndices, $set => $set.size);

// æ’åºçŠ¶æ€
export type SortField = 'name' | 'address';
export type SortOrder = 'asc' | 'desc';
export interface SortConfig {
  field: SortField;
  order: SortOrder;
}

// é»˜è®¤æŒ‰åç§°å‡åºæ’åº
export const a2lSortConfigs = writable<SortConfig[]>([{ field: 'name', order: 'asc' }]);
export const elfSortConfigs = writable<SortConfig[]>([{ field: 'name', order: 'asc' }]);

// æ’åºå·¥å…·å‡½æ•°
export function toggleSort(configs: SortConfig[], field: SortField, shiftKey: boolean): SortConfig[];
export function applySorting<T>(items: T[], configs: SortConfig[], getFieldValue: (item: T, field: SortField) => string | number): T[];
```

### 4.2 Tauri Commands

```rust
// commands.rs

// æ–‡ä»¶æ“ä½œ
#[tauri::command] fn load_elf(path: String) -> Result<LoadResult, String>;
#[tauri::command] fn load_package(path: String) -> Result<LoadResult, String>;
#[tauri::command] fn generate_package(elf: String, output: Option<String>) -> Result<PackageMeta, String>;
#[tauri::command] fn load_a2l(path: String) -> Result<A2lLoadResult, String>;

// å˜é‡æŸ¥è¯¢
#[tauri::command] fn search_elf_entries(query: String, offset: usize, limit: usize) -> Vec<A2lEntry>;
#[tauri::command] fn get_elf_count() -> usize;
#[tauri::command] fn search_a2l_variables(query: String, offset: usize, limit: usize) -> Vec<A2lVariable>;

// å¯¼å‡º/åˆ é™¤
#[tauri::command] fn export_entries(indices: Vec<usize>, mode: String) -> Result<ExportResult, String>;
#[tauri::command] fn delete_variables(indices: Vec<usize>) -> Result<usize, String>;
```

### 4.3 æ•°æ®ç±»å‹

```typescript
// types.ts

interface A2lEntry {
  index: number;
  full_name: string;
  address: number;
  size: number;
  a2l_type: string;
  type_name: string;
  bit_offset: number | null;
  bit_size: number | null;
}

interface A2lVariable {
  name: string;
  address: string | null;
  data_type: string;     // ULONG, FLOAT32_IEEE ç­‰
  var_type: 'MEASUREMENT' | 'CHARACTERISTIC';  // è§‚æµ‹/æ ‡å®šç±»å‹
}

interface LoadResult {
  meta: PackageMeta;
  entry_count: number;
}

interface PackageMeta {
  file_name: string;
  elf_path: string | null;
  entry_count: number;
  created_at: number;
}

interface A2lLoadResult {
  path: string;
  variable_count: number;
  existing_names: string[];
}

interface ExportResult {
  added: number;
  skipped: number;
  existing: number;
}

// æ’åºç›¸å…³ç±»å‹
type SortField = 'name' | 'address';
type SortOrder = 'asc' | 'desc';
interface SortConfig {
  field: SortField;
  order: SortOrder;
}
```

---

## 5. å¯¹è¯æ¡†è®¾è®¡

### 5.1 å¯¼å‡ºç¡®è®¤å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼å‡ºåˆ° A2L                      [âœ–]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  å°† 3 ä¸ªå˜é‡æ·»åŠ ä¸ºè§‚æµ‹å˜é‡             â”‚
â”‚                                        â”‚
â”‚  ç›®æ ‡æ–‡ä»¶: output.a2l                  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å·²å­˜åœ¨: 1,200                  â”‚   â”‚
â”‚  â”‚ æ–°å¢: 2                        â”‚   â”‚
â”‚  â”‚ è·³è¿‡: 1 (å·²å­˜åœ¨äº A2L)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [å–æ¶ˆ]  [ç¡®è®¤è¿½åŠ ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ç”Ÿæˆæ•°æ®åŒ…å¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿæˆæ•°æ®åŒ…                      [âœ–]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  ELF æ–‡ä»¶: firmware.elf (437 MB)       â”‚
â”‚                                        â”‚
â”‚  æ•°æ®åŒ…å°†ä¿å­˜åˆ°:                       â”‚
â”‚  /path/to/firmware.elf.a2ldata        â”‚
â”‚                                        â”‚
â”‚  âš  é¦–æ¬¡è§£æå¤§å‹ ELF å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ     â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [é€‰æ‹©å…¶ä»–ä½ç½®]  [ç”Ÿæˆ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. æ„å»ºä¸éƒ¨ç½²

### 6.1 å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½)
npm run tauri dev

# æ„å»º egui ç‰ˆæœ¬ (æ—§)
cargo run --bin a2l-editor

# æ„å»º Tauri ç‰ˆæœ¬ (æ–°)
npm run tauri build
```

### 6.2 æ„å»ºäº§ç‰©

| ç‰ˆæœ¬ | å‘½ä»¤ | äº§ç‰© |
|------|------|------|
| egui | `cargo build --release` | `target/release/a2l-editor` |
| Tauri | `npm run tauri build` | `src-tauri/target/release/bundle/` |

### 6.3 æ”¯æŒå¹³å°

| å¹³å° | æ ¼å¼ |
|------|------|
| Linux | .deb, .AppImage |
| Windows | .msi, .exe |
| macOS | .dmg, .app |
