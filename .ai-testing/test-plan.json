{
  "project": "a2l-editor",
  "version": "0.3.0",
  "description": "A2L Editor E2E 测试计划 - 针对最近修复问题的专项测试",
  "created_at": "2026-02-18",
  "updated_at": "2026-02-18",
  "framework": "Playwright",
  "technology_stack": ["Tauri v2", "SvelteKit 5", "TypeScript", "Rust"],

  "change_context": {
    "issues_addressed": [
      {
        "id": "#8",
        "title": "A2L 选中状态修复",
        "description": "a2lSelectedIndices 改为 a2lSelectedNames，搜索/排序后删除和编辑正确",
        "priority": "critical"
      },
      {
        "id": "#12-21",
        "title": "A2L 输出格式修复",
        "description": "换行问题、缩进、remove_variables/parse_existing_names/modify_variable 识别新格式、bitfield 支持",
        "priority": "critical"
      }
    ],
    "files_modified": [
      "src/lib/a2l.rs",
      "src/lib/types.rs",
      "src-ui/src/lib/stores.ts",
      "src-ui/src/lib/components/A2lPanel.svelte",
      "src-ui/src/lib/components/A2lEditor.svelte",
      "src-ui/src/lib/components/ContextMenuA2l.svelte",
      "src-tauri/src/commands.rs"
    ]
  },

  "test_strategy": {
    "approach": "回归测试 + 缺陷验证测试",
    "focus_areas": [
      "搜索过滤后的选中状态正确性",
      "A2L 输出格式符合规范",
      "Bitfield 变量 BIT_MASK 正确生成"
    ],
    "levels": [
      {
        "name": "缺陷验证测试",
        "description": "针对已修复问题的专项测试",
        "priority": "critical",
        "test_cases": 12
      },
      {
        "name": "回归测试",
        "description": "确保修复不影响其他功能",
        "priority": "high",
        "test_cases": 8
      }
    ]
  },

  "test_categories": [
    {
      "id": "TC-SELECTION",
      "name": "选中状态修复测试",
      "description": "验证搜索/排序后选中状态正确",
      "priority": "critical",
      "test_cases_count": 4,
      "related_issue": "#8"
    },
    {
      "id": "TC-OUTPUT-FORMAT",
      "name": "A2L 输出格式测试",
      "description": "验证 A2L 输出格式符合规范",
      "priority": "critical",
      "test_cases_count": 5,
      "related_issue": "#12-21"
    },
    {
      "id": "TC-BITFIELD",
      "name": "Bitfield 变量测试",
      "description": "验证 bitfield 变量的 BIT_MASK 生成",
      "priority": "critical",
      "test_cases_count": 3,
      "related_issue": "#19-20"
    },
    {
      "id": "TC-REGRESSION",
      "name": "回归测试",
      "description": "确保修复不影响其他功能",
      "priority": "high",
      "test_cases_count": 8
    }
  ],

  "test_suites": [
    {
      "id": "TS-SELECTION-FIX",
      "name": "选中状态修复验证",
      "description": "验证 Issue #8 的修复",
      "priority": "critical",
      "test_cases": [
        "TC-SELECTION-001",
        "TC-SELECTION-002",
        "TC-SELECTION-003",
        "TC-SELECTION-004"
      ],
      "execution_order": "sequential",
      "estimated_time": "3-5 minutes"
    },
    {
      "id": "TS-OUTPUT-FORMAT",
      "name": "输出格式验证",
      "description": "验证 Issue #12-21 的修复",
      "priority": "critical",
      "test_cases": [
        "TC-OUTPUT-001",
        "TC-OUTPUT-002",
        "TC-OUTPUT-003",
        "TC-OUTPUT-004",
        "TC-OUTPUT-005"
      ],
      "execution_order": "sequential",
      "estimated_time": "5-8 minutes"
    },
    {
      "id": "TS-BITFIELD",
      "name": "Bitfield 功能验证",
      "description": "验证 bitfield 变量的 BIT_MASK 生成",
      "priority": "critical",
      "test_cases": [
        "TC-BITFIELD-001",
        "TC-BITFIELD-002",
        "TC-BITFIELD-003"
      ],
      "execution_order": "sequential",
      "estimated_time": "2-3 minutes"
    },
    {
      "id": "TS-REGRESSION",
      "name": "回归测试套件",
      "description": "确保修复不影响其他功能",
      "priority": "high",
      "test_cases": [
        "TC-REG-001",
        "TC-REG-002",
        "TC-REG-003",
        "TC-REG-004",
        "TC-REG-005",
        "TC-REG-006",
        "TC-REG-007",
        "TC-REG-008"
      ],
      "estimated_time": "5-8 minutes"
    }
  ],

  "test_environment": {
    "mock_tauri_api": true,
    "mock_file_system": true,
    "test_data": {
      "elf_entries_count": 100,
      "a2l_variables_count": 50,
      "bitfield_entries_count": 10
    },
    "timeout": {
      "page_load": 10000,
      "element_wait": 5000,
      "animation_wait": 500
    }
  },

  "coverage_targets": {
    "selection_fix": "100%",
    "output_format_fix": "100%",
    "bitfield_support": "100%",
    "regression": "80%"
  },

  "total_cases": 20,
  "estimated_time": "15-25 minutes"
}
